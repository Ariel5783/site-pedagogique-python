---
title: "Mini-Projet : Gestion d'une biblioth√®que"
level: ["BTS CIEL", "BTS SIO"]
type: "exercices"
objectifs:
  - "Concevoir des classes en Python (POO)"
  - "Manipuler listes et dictionnaires"
  - "D√©velopper un menu interactif"
  - "G√©rer les exceptions et erreurs"
prerequis:
  - "Programmation orient√©e objet"
  - "Structures de donn√©es (listes, dictionnaires)"
duree_estimee: "4h00"
auteur: "Eric MORMIN"
updated: "2025-12-14"
mots_cles: ["projet", "poo", "biblioth√®que", "classes", "menu"]
mode_defi: true
---

import InteractiveBlock from '../../components/InteractiveBlock.astro';
import TeacherOnly from '../../components/TeacherOnly.astro';

## Contexte

Dans le cadre de votre formation en BTS CIEL, vous allez d√©velopper une application en Python permettant de g√©rer une biblioth√®que num√©rique. Ce projet vous permettra de mettre en pratique la programmation orient√©e objet (POO) et la manipulation des structures de donn√©es.

## Objectifs du projet

* Concevoir des **classes** en Python pour mod√©liser les livres et la biblioth√®que
* Manipuler des **listes** et **dictionnaires** pour la gestion des livres et des emprunts
* D√©velopper un **menu interactif** permettant aux utilisateurs d'interagir avec la biblioth√®que
* G√©rer les **exceptions et les erreurs** pour √©viter les actions impossibles

## Consignes

Vous devez √©crire un programme en Python permettant de :

1. **Ajouter un livre** √† la biblioth√®que
2. **Rechercher un livre** par son titre
3. **Emprunter un livre** (s'il est disponible)
4. **Retourner un livre** apr√®s l'avoir emprunt√©
5. **Afficher les livres disponibles** dans la biblioth√®que
6. **G√©rer les erreurs** (livre introuvable, livre d√©j√† emprunt√©, etc.)

<div class="alert alert-info mb-6">
  <div class="flex items-start">
    <svg class="w-5 h-5 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
      <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
    </svg>
    <div>
      <p class="font-medium">Conseils de r√©alisation</p>
      <ul class="text-sm mt-2 space-y-1">
        <li>Commencez par cr√©er la classe Livre</li>
        <li>Testez chaque m√©thode avant de passer √† la suivante</li>
        <li>Ajoutez des commentaires pour expliquer votre code</li>
        <li>G√©rez tous les cas d'erreur possibles</li>
      </ul>
    </div>
  </div>
</div>

## Partie 1 : Cr√©ation de la classe `Livre`

Chaque livre doit contenir les informations suivantes :

* `titre` (str)
* `auteur` (str)
* `disponible` (bool, True par d√©faut)

**M√©thodes √† impl√©menter :**

* `afficher_details()`: Affiche les informations du livre
* `emprunter()`: Passe `disponible` √† `False`
* `retourner()`: Passe `disponible` √† `True`

<InteractiveBlock
  id="classe-livre"
  title="Votre code : Classe Livre"
  type="code"
  placeholder="class Livre:
    def __init__(self, titre, auteur):
        # Votre code ici
        pass
    
    def afficher_details(self):
        # Affiche les d√©tails du livre
        pass
    
    def emprunter(self):
        # Emprunte le livre s'il est disponible
        pass
    
    def retourner(self):
        # Retourne le livre
        pass

# Tests
livre1 = Livre('1984', 'George Orwell')
livre1.afficher_details()
"
/>

## Partie 2 : Cr√©ation de la classe `Bibliotheque`

Elle doit g√©rer les livres et les utilisateurs.

**Attributs :**

* `livres` : Liste contenant les objets `Livre`
* `utilisateurs` : Dictionnaire `{nom_utilisateur: [titres_emprunt√©s]}`

**M√©thodes √† impl√©menter :**

* `ajouter_livre(livre)`: Ajoute un livre √† la biblioth√®que
* `rechercher_livre(titre)`: Retourne un livre s'il existe
* `emprunter_livre(nom_utilisateur, titre)`: Permet d'emprunter un livre
* `retourner_livre(nom_utilisateur, titre)`: Permet de rendre un livre emprunt√©
* `afficher_livres()`: Affiche tous les livres disponibles

<InteractiveBlock
  id="classe-bibliotheque"
  title="Votre code : Classe Bibliotheque"
  type="code"
  placeholder="class Bibliotheque:
    def __init__(self):
        # Votre code ici
        pass
    
    def ajouter_livre(self, livre):
        # Ajoute un livre
        pass
    
    def rechercher_livre(self, titre):
        # Recherche un livre par titre
        pass
    
    def emprunter_livre(self, nom_utilisateur, titre):
        # Emprunte un livre
        pass
    
    def retourner_livre(self, nom_utilisateur, titre):
        # Retourne un livre
        pass
    
    def afficher_livres(self):
        # Affiche tous les livres disponibles
        pass

# Tests
biblio = Bibliotheque()
livre1 = Livre('1984', 'George Orwell')
biblio.ajouter_livre(livre1)
"
/>

## Partie 3 : Interface Utilisateur

Le programme doit proposer un **menu interactif** permettant de :

1. Ajouter un livre
2. Rechercher un livre
3. Emprunter un livre
4. Retourner un livre
5. Afficher la liste des livres disponibles
6. Quitter le programme

<InteractiveBlock
  id="menu-interactif"
  title="Votre code : Menu principal"
  type="code"
  placeholder="def menu():
    biblio = Bibliotheque()
    
    while True:
        print('\\nMenu Biblioth√®que')
        print('1. Ajouter un livre')
        print('2. Rechercher un livre')
        print('3. Emprunter un livre')
        print('4. Retourner un livre')
        print('5. Afficher les livres')
        print('6. Quitter')
        
        choix = input('Choisissez une option : ')
        
        # Votre code ici
        
        if choix == '6':
            break

# Lancement
if __name__ == '__main__':
    menu()
"
/>

## Exemple d'utilisation attendu

```python
# Cr√©ation de la biblioth√®que
biblio = Bibliotheque()

# Ajout de livres
livre1 = Livre("1984", "George Orwell")
livre2 = Livre("Le Petit Prince", "Antoine de Saint-Exup√©ry")
biblio.ajouter_livre(livre1)
biblio.ajouter_livre(livre2)

# Emprunt d'un livre
biblio.emprunter_livre("Alice", "1984")

# Affichage des livres disponibles
biblio.afficher_livres()
# Sortie attendue :
# Titre: Le Petit Prince, Auteur: Antoine de Saint-Exup√©ry, √âtat: Disponible
```

## √âvaluation (sur 20 points)

‚úÖ **Classe Livre** (4 points)
- Structure et attributs : 1 point
- M√©thodes fonctionnelles : 3 points

‚úÖ **Classe Bibliotheque** (8 points)
- Structure et attributs : 1 point
- M√©thode ajouter_livre : 1 point
- M√©thode rechercher_livre : 1.5 point
- M√©thode emprunter_livre : 2 points
- M√©thode retourner_livre : 2 points
- M√©thode afficher_livres : 0.5 point

‚úÖ **Menu interactif** (4 points)
- Structure du menu : 1 point
- Gestion des options : 2 points
- Interface utilisateur : 1 point

‚úÖ **Gestion des erreurs** (2 points)
- V√©rifications appropri√©es : 1 point
- Messages d'erreur clairs : 1 point

‚úÖ **Code et documentation** (2 points)
- Clart√© et organisation : 1 point
- Commentaires : 1 point

## Livrables

üìå Un fichier Python `bibliotheque.py` contenant le programme complet  
üìå Un fichier `tests.txt` d√©crivant les tests r√©alis√©s et les r√©sultats obtenus

<TeacherOnly title="Corrig√© complet du projet">

## Solution compl√®te

### 1. Classe Livre

```python
class Livre:
    """Repr√©sente un livre dans la biblioth√®que"""
    
    def __init__(self, titre, auteur):
        """
        Initialise un livre
        
        Args:
            titre (str): Le titre du livre
            auteur (str): L'auteur du livre
        """
        self.titre = titre
        self.auteur = auteur
        self.disponible = True  # Par d√©faut, le livre est disponible
    
    def afficher_details(self):
        """Affiche les d√©tails du livre"""
        etat = "Disponible" if self.disponible else "Emprunt√©"
        print(f"Titre: {self.titre}, Auteur: {self.auteur}, √âtat: {etat}")
    
    def emprunter(self):
        """
        Emprunte le livre s'il est disponible
        
        Returns:
            bool: True si l'emprunt a r√©ussi, False sinon
        """
        if self.disponible:
            self.disponible = False
            return True
        return False
    
    def retourner(self):
        """Retourne le livre √† la biblioth√®que"""
        self.disponible = True
```

**Points cl√©s** :
- Utilisation de docstrings pour documenter
- M√©thode `emprunter()` retourne un bool√©en pour indiquer le succ√®s
- Expression ternaire pour afficher l'√©tat

---

### 2. Classe Bibliotheque

```python
class Bibliotheque:
    """G√®re une collection de livres et les emprunts"""
    
    def __init__(self):
        """Initialise une biblioth√®que vide"""
        self.livres = []  # Liste des livres
        self.utilisateurs = {}  # {nom: [titres_emprunt√©s]}
    
    def ajouter_livre(self, livre):
        """
        Ajoute un livre √† la biblioth√®que
        
        Args:
            livre (Livre): Le livre √† ajouter
        """
        self.livres.append(livre)
        print(f"Livre '{livre.titre}' ajout√© √† la biblioth√®que.")
    
    def rechercher_livre(self, titre):
        """
        Recherche un livre par son titre
        
        Args:
            titre (str): Le titre √† rechercher
            
        Returns:
            Livre or None: Le livre trouv√© ou None
        """
        for livre in self.livres:
            if livre.titre.lower() == titre.lower():
                return livre
        return None
    
    def emprunter_livre(self, nom_utilisateur, titre):
        """
        Permet √† un utilisateur d'emprunter un livre
        
        Args:
            nom_utilisateur (str): Le nom de l'utilisateur
            titre (str): Le titre du livre
        """
        livre = self.rechercher_livre(titre)
        
        if not livre:
            print(f"Erreur : Le livre '{titre}' n'existe pas.")
            return
        
        if not livre.emprunter():
            print(f"Erreur : Le livre '{titre}' est d√©j√† emprunt√©.")
            return
        
        # Ajouter l'emprunt √† l'utilisateur
        if nom_utilisateur not in self.utilisateurs:
            self.utilisateurs[nom_utilisateur] = []
        
        self.utilisateurs[nom_utilisateur].append(livre.titre)
        print(f"‚úì {nom_utilisateur} a emprunt√© '{titre}'.")
    
    def retourner_livre(self, nom_utilisateur, titre):
        """
        Permet √† un utilisateur de retourner un livre
        
        Args:
            nom_utilisateur (str): Le nom de l'utilisateur
            titre (str): Le titre du livre
        """
        # V√©rifier que l'utilisateur a emprunt√© ce livre
        if nom_utilisateur not in self.utilisateurs:
            print(f"Erreur : {nom_utilisateur} n'a rien emprunt√©.")
            return
        
        if titre not in self.utilisateurs[nom_utilisateur]:
            print(f"Erreur : {nom_utilisateur} n'a pas emprunt√© '{titre}'.")
            return
        
        # Rechercher le livre
        livre = self.rechercher_livre(titre)
        if not livre:
            print(f"Erreur : Livre '{titre}' introuvable.")
            return
        
        # Retourner le livre
        livre.retourner()
        self.utilisateurs[nom_utilisateur].remove(titre)
        print(f"‚úì {nom_utilisateur} a retourn√© '{titre}'.")
    
    def afficher_livres(self):
        """Affiche tous les livres de la biblioth√®que"""
        if not self.livres:
            print("La biblioth√®que est vide.")
            return
        
        print("\n=== Liste des livres ===")
        for livre in self.livres:
            livre.afficher_details()
    
    def afficher_livres_disponibles(self):
        """Affiche uniquement les livres disponibles"""
        disponibles = [l for l in self.livres if l.disponible]
        
        if not disponibles:
            print("Aucun livre disponible.")
            return
        
        print("\n=== Livres disponibles ===")
        for livre in disponibles:
            livre.afficher_details()
```

**Points cl√©s** :
- Gestion compl√®te des erreurs avec messages clairs
- S√©paration entre affichage de tous les livres et livres disponibles
- V√©rifications avant chaque action

---

### 3. Menu interactif

```python
def menu():
    """Menu principal de l'application"""
    biblio = Bibliotheque()
    
    # Ajout de quelques livres par d√©faut
    biblio.ajouter_livre(Livre("1984", "George Orwell"))
    biblio.ajouter_livre(Livre("Le Petit Prince", "Antoine de Saint-Exup√©ry"))
    biblio.ajouter_livre(Livre("Harry Potter", "J.K. Rowling"))
    
    while True:
        print("\n" + "="*40)
        print("üìö BIBLIOTH√àQUE NUM√âRIQUE üìö")
        print("="*40)
        print("1. Ajouter un livre")
        print("2. Rechercher un livre")
        print("3. Emprunter un livre")
        print("4. Retourner un livre")
        print("5. Afficher tous les livres")
        print("6. Afficher les livres disponibles")
        print("7. Quitter")
        print("="*40)
        
        choix = input("Votre choix : ").strip()
        
        if choix == "1":
            titre = input("Titre du livre : ").strip()
            auteur = input("Auteur du livre : ").strip()
            if titre and auteur:
                biblio.ajouter_livre(Livre(titre, auteur))
            else:
                print("Erreur : Titre et auteur requis.")
        
        elif choix == "2":
            titre = input("Titre √† rechercher : ").strip()
            livre = biblio.rechercher_livre(titre)
            if livre:
                livre.afficher_details()
            else:
                print(f"Livre '{titre}' non trouv√©.")
        
        elif choix == "3":
            nom = input("Votre nom : ").strip()
            titre = input("Titre du livre : ").strip()
            if nom and titre:
                biblio.emprunter_livre(nom, titre)
            else:
                print("Erreur : Nom et titre requis.")
        
        elif choix == "4":
            nom = input("Votre nom : ").strip()
            titre = input("Titre du livre : ").strip()
            if nom and titre:
                biblio.retourner_livre(nom, titre)
            else:
                print("Erreur : Nom et titre requis.")
        
        elif choix == "5":
            biblio.afficher_livres()
        
        elif choix == "6":
            biblio.afficher_livres_disponibles()
        
        elif choix == "7":
            print("\nMerci d'avoir utilis√© la biblioth√®que ! √Ä bient√¥t ! üëã")
            break
        
        else:
            print("Choix invalide. Veuillez r√©essayer.")

# Point d'entr√©e du programme
if __name__ == "__main__":
    menu()
```

**Points cl√©s** :
- Interface claire et structur√©e
- Validation des entr√©es utilisateur
- Messages d'erreur explicites
- Livres pr√©-charg√©s pour les tests

---

## Bar√®me d√©taill√©

### Classe Livre (4 points)
- `__init__` correct : 1 point
- `afficher_details()` : 1 point
- `emprunter()` avec retour bool√©en : 1 point
- `retourner()` : 1 point

### Classe Bibliotheque (8 points)
- `__init__` avec livres et utilisateurs : 1 point
- `ajouter_livre()` : 1 point
- `rechercher_livre()` avec gestion casse : 1.5 point
- `emprunter_livre()` avec toutes v√©rifications : 2 points
- `retourner_livre()` avec toutes v√©rifications : 2 points
- `afficher_livres()` : 0.5 point

### Menu interactif (4 points)
- Structure while avec toutes les options : 1 point
- Gestion correcte de chaque option : 2 points
- Messages et interface clairs : 1 point

### Gestion des erreurs (2 points)
- V√©rifications avant actions : 1 point
- Messages d'erreur clairs : 1 point

### Code et documentation (2 points)
- Code propre et organis√© : 1 point
- Commentaires et docstrings : 1 point

---

## Extensions possibles

Pour aller plus loin, les √©tudiants peuvent :

1. **Ajouter la persistance** : Sauvegarder/charger depuis un fichier JSON
2. **Gestion avanc√©e** : Limiter le nombre d'emprunts par utilisateur
3. **Recherche am√©lior√©e** : Recherche par auteur, par disponibilit√©
4. **Statistiques** : Livres les plus emprunt√©s, utilisateurs actifs
5. **Date d'emprunt** : G√©rer les dates et les retards

---

## Tests recommand√©s

```python
# Test 1 : Emprunt normal
biblio.emprunter_livre("Alice", "1984")  # ‚úì Devrait r√©ussir

# Test 2 : Double emprunt
biblio.emprunter_livre("Bob", "1984")  # ‚úó Devrait √©chouer

# Test 3 : Retour normal
biblio.retourner_livre("Alice", "1984")  # ‚úì Devrait r√©ussir

# Test 4 : Retour sans emprunt
biblio.retourner_livre("Charlie", "1984")  # ‚úó Devrait √©chouer

# Test 5 : Livre inexistant
biblio.emprunter_livre("Alice", "Inexistant")  # ‚úó Devrait √©chouer
```

</TeacherOnly>
